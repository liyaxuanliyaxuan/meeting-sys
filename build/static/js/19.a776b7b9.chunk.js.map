{"version":3,"sources":["components/commons/Button/Button.tsx","components/commons/Button/index.ts","components/commons/Button/Button.module.scss","components/forms/Input/Input.tsx","components/forms/Input/Input.module.scss","utils/validate.ts","components/forms/RadioGroup/RadioGroup.module.scss","components/forms/RadioGroup/RadioGroup.tsx","components/forms/RadioGroup/index.ts","pages/Signup/style.module.scss","pages/Signup/index.tsx"],"names":["MyButton","type","value","className","color","fontSize","onClick","loading","disabled","size","htmlType","style","btn","module","exports","Input","props","name","placeholder","bind","msg","warn","readOnly","update","hasBtn","btnValue","btnCallback","btnStatus","dateCallback","onFocus","onBlur","onInput","useState","isShowPwd","setIsShowPwd","isReadOnly","setIsReadOnly","toggleShowPwd","container","label","input","onChange","bindEvent","eye","EMAIL","PHONE","validate","required","isNull","isEmpty","checkLength","length","isEmail","test","isPhoneNumber","RadioGroup","radioList","initialData","checkedTarget","setCheckedTarget","useUpdateEffect","e","target","map","item","radio","key","checked","Signup","gender","setGender","useChange","pwd","confirmPwd","mail","phone","isValidateRight","setIsValidateRight","useImmer","userName","isRight","validateMsg","setValidateMsg","location","useLocation","history","useHistory","signupR","useRequest","signup","manual","onSuccess","result","params","code","success","push","validateForm","draft","validateName","useDebounceFn","validatePwd","validateConfirmPwd","validateMail","validatePhone","checkValidate","handleSubmit","a","preventDefault","run","username","emailaddr","password","state","verificationCode","form","onSubmit"],"mappings":"6KA+BeA,MAPf,YAAqI,IAAD,IAAhHC,YAAgH,MAAzG,SAAyG,EAA/FC,EAA+F,EAA/FA,MAAOC,EAAwF,EAAxFA,UAAWC,EAA6E,EAA7EA,MAAOC,EAAsE,EAAtEA,SAAUC,EAA4D,EAA5DA,QAA4D,IAApDC,eAAoD,SAAtCC,EAAsC,EAAtCA,SAASC,EAA6B,EAA7BA,KACrG,OAEE,uBAAQR,KAAK,UAAUQ,KAAMA,EAAMC,SAAUT,EAAMM,QAASA,EAASJ,UAAS,UAAKQ,IAAMC,IAAX,YAAkBT,GAAaQ,MAAO,CAAE,gBAAmBP,EAAO,SAAW,GAAX,OAAeC,EAAf,OAA+BC,QAASA,EAASE,SAAUA,GAAWN,IC3B1N,mC,oBCCAW,EAAOC,QAAU,CAAC,IAAM,sB,gHC+GTC,IAlEf,SAAeC,GAA6B,IAExCf,EAiBEe,EAjBFf,KACAgB,EAgBED,EAhBFC,KAHuC,EAmBrCD,EAfFE,mBAJuC,MAIzB,uCAJyB,EAKvCC,EAcEH,EAdFG,KACAC,EAaEJ,EAbFI,IANuC,EAmBrCJ,EAZFK,YAPuC,WAmBrCL,EAXFM,gBARuC,WAmBrCN,EAVFO,cATuC,SAUvCrB,EASEc,EATFd,MAVuC,EAmBrCc,EARFQ,cAXuC,WAmBrCR,EAPFS,gBAZuC,MAY5B,GAZ4B,EAavCC,EAMEV,EANFU,YAbuC,EAmBrCV,EALFW,iBAduC,SAevCC,EAIEZ,EAJFY,aACAC,EAGEb,EAHFa,QACAC,EAEEd,EAFFc,OACAC,EACEf,EADFe,QAlBuC,EAoBPC,oBAAS,GApBF,mBAoBlCC,EApBkC,KAoBvBC,EApBuB,OAqBLF,mBAASV,GArBJ,mBAqBlCa,EArBkC,KAqBtBC,EArBsB,KAsBnCC,EAAgB,WACpBH,GAAcD,IAEhB,OACE,yBAAK9B,UAAS,UAAKQ,IAAM2B,UAAX,YAAwBtB,EAAMb,YAC1C,2BAAOA,UAAWQ,IAAM4B,OACtB,0BAAMpC,UAAWQ,IAAMM,MAAOA,GACpB,SAAThB,EAAkB,uBAAYE,UAAWQ,IAAM6B,MAAOtB,YAAY,2BAAOuB,SAAUb,IAClF,yCACEzB,UAAWQ,IAAM6B,MACjBvC,KAAiB,aAATA,EACNA,EAEAgC,EACE,OAAS,WAEbf,YAAaA,EACbI,SAAUa,EACVjC,MAAOA,GAAS,IAVlB,OAWMiB,QAXN,IAWMA,OAXN,EAWMA,EAAMuB,UAXZ,CAYEb,QAASA,EACTC,OAAQA,EACRC,QAASA,KAEH,aAAT9B,EACCgC,EACE,kBAAC,IAAD,CAAa9B,UAAWQ,IAAMgC,IAAKrC,QAAS+B,IAE5C,kBAAC,IAAD,CAAsBlC,UAAWQ,IAAMgC,IAAKrC,QAAS+B,IAEvD,KACDb,EAAU,4BACTrB,UAAWwB,EAAYhB,IAAMH,SAAWG,IAAMC,IAC9CJ,SAAUmB,EACVrB,QAASoB,GAAcD,GAAsB,KAC9CF,EAAU,0BAAMpB,UAAWQ,IAAMY,OAAQjB,QAAS,kBAAM8B,GAAc,KAA5D,gBAAiF,MAI9F,0BAAMjC,UAAWkB,EAAOV,IAAMU,KAAOV,IAAMS,KAAMA,M,oBC1GvDP,EAAOC,QAAU,CAAC,UAAY,yBAAyB,MAAQ,qBAAqB,KAAO,oBAAoB,MAAQ,qBAAqB,IAAM,mBAAmB,SAAW,wBAAwB,IAAM,mBAAmB,IAAM,mBAAmB,KAAO,oBAAoB,OAAS,wB,uDCOxR8B,EAAQ,8DACRC,EAAQ,oBA0BRC,E,kCAAAA,EACGC,SAzBe,SAAC7C,GACvB,OAAI8C,iBAAO9C,KAAU+C,kBAAQ/C,IAuBzB4C,EAEGI,YAlBkB,SAAChD,EAAeiD,GACzC,OAAIjD,EAAMiD,QAAUA,GAehBL,EAGGM,QAXc,SAAClD,GACtB,OAAO0C,EAAMS,KAAKnD,IAOd4C,EAIGQ,cARoB,SAACpD,GAC5B,OAAO2C,EAAMQ,KAAKnD,IAUL4C,O,oBCzCfjC,EAAOC,QAAU,CAAC,UAAY,8BAA8B,KAAO,yBAAyB,UAAY,8BAA8B,MAAQ,4B,sFC6C/HyC,MA5Bf,YAAiG,IAA3EtC,EAA0E,EAA1EA,KAAMuC,EAAoE,EAApEA,UAAWrC,EAAyD,EAAzDA,KAAyD,IAAnDsC,mBAAmD,MAArCD,EAAU,GAA2B,IACpDxB,mBAASyB,GAD2C,mBACvFC,EADuF,KACxEC,EADwE,KAS9F,OAHAC,aAAgB,WACdD,EAAiBF,KAChB,CAACA,IAEF,yBAAKtD,UAAWQ,IAAM2B,WACpB,0BAAMnC,UAAWQ,IAAMM,MAAOA,GAC9B,yBAAKd,UAAWQ,IAAM6C,UAAWf,SAVhB,SAACoB,GACpB1C,EAAK0C,EAAEC,OAAO5D,OACdyD,EAAiBE,EAAEC,OAAO5D,SASrBsD,EAAUO,KAAI,SAACC,GACd,OACE,2BAAO7D,UAAWQ,IAAMsD,MAAOC,IAAKF,GAClC,2BAAO/D,KAAK,QAAQgB,KAAMA,EAAMf,MAAO8D,EAAMG,QAAST,IAAkBM,EAAMvB,SAAU,eAExF,8BAAOuB,UCpCrB,mC,oBCCAnD,EAAOC,QAAU,CAAC,KAAO,oBAAoB,IAAM,qB,8MCkPpCsD,UApNA,WAAM,MAESpC,mBAAoB,UAF7B,mBAEZqC,EAFY,KAEJC,EAFI,KAKbrD,EAAOsD,YAAU,IACjBC,EAAMD,YAAU,IAChBE,EAAaF,YAAU,IACvBG,EAAOH,YAAU,IACjBI,EAAQJ,YAAU,IATL,EAY2BvC,oBAAS,GAZpC,mBAYZ4C,EAZY,KAYKC,EAZL,OAamBC,YAAS,CAC7CC,SAAU,CAAE3D,IAAK,oDAAaC,MAAM,EAAO2D,SAAS,GACpDR,IAAK,CAAEpD,IAAK,wCAAWC,MAAM,EAAO2D,SAAS,GAC7CP,WAAY,CAAErD,IAAK,wCAAWC,MAAM,EAAO2D,SAAS,GACpDN,KAAM,CAAEtD,IAAK,GAAIC,MAAM,EAAO2D,SAAS,GACvCL,MAAO,CAAEvD,IAAK,GAAIC,MAAM,EAAO2D,SAAS,KAlBvB,mBAaZC,EAbY,KAaCC,EAbD,KAsBbC,EAAgBC,cAEhBC,EAAUC,cAGVC,EAAUC,YAAWC,IAAQ,CACjCC,QAAQ,EACRC,UAAW,SAACC,EAAQC,GACdD,EAAOE,MAAQ,IACjB,IAAQC,QAAQ,2DAChBV,EAAQW,KAAK,kBAKbC,EAEU,WACZ,OAAInD,IAASC,SAAS9B,EAAKf,OACrB4C,IAASI,YAAYjC,EAAKf,MAAO,IACnCgF,GAAe,SAAAgB,GACbA,EAAMnB,SAAS3D,IAAM,oDACrB8E,EAAMnB,SAAS1D,MAAO,EACtB6E,EAAMnB,SAASC,SAAU,MAEpB,IAEPE,GAAe,SAAAgB,GACbA,EAAMnB,SAAS3D,IAAM,oDACrB8E,EAAMnB,SAAS1D,MAAO,EACtB6E,EAAMnB,SAASC,SAAU,MAEpB,IAGTE,GAAe,SAAAgB,GACbA,EAAMnB,SAAS3D,IAAM,6CACrB8E,EAAMnB,SAAS1D,MAAO,EACtB6E,EAAMnB,SAASC,SAAU,MAEpB,IAzBPiB,EA6BS,WACX,OAAInD,IAASC,SAASyB,EAAItE,OACnB4C,IAASI,YAAYsB,EAAItE,MAAO,IAQnCgF,GAAe,SAAAgB,GACbA,EAAM1B,IAAIpD,IAAM,wCAChB8E,EAAM1B,IAAInD,MAAO,EACjB6E,EAAM1B,IAAIQ,SAAU,MAEf,IAZPE,GAAe,SAAAgB,GACbA,EAAM1B,IAAIpD,IAAM,wCAChB8E,EAAM1B,IAAInD,MAAO,EACjB6E,EAAM1B,IAAIQ,SAAU,MAEf,IAUTE,GAAe,SAAAgB,GACbA,EAAM1B,IAAIpD,IAAM,uCAChB8E,EAAM1B,IAAInD,MAAO,EACjB6E,EAAM1B,IAAIQ,SAAU,MAEf,IApDPiB,EAwDgB,WAClB,OAAInD,IAASC,SAAS0B,EAAWvE,OAC3BsE,EAAItE,QAAUuE,EAAWvE,OAC3BgF,GAAe,SAAAgB,GACbA,EAAMzB,WAAWrD,IAAM,wCACvB8E,EAAMzB,WAAWpD,MAAO,EACxB6E,EAAMzB,WAAWO,SAAU,MAEtB,IAEPE,GAAe,SAAAgB,GACbA,EAAMzB,WAAWrD,IAAM,qEACvB8E,EAAMzB,WAAWpD,MAAO,EACxB6E,EAAMzB,WAAWO,SAAU,MAEtB,IAGTE,GAAe,SAAAgB,GACbA,EAAMzB,WAAWrD,IAAM,uCACvB8E,EAAMzB,WAAWpD,MAAO,EACxB6E,EAAMzB,WAAWO,SAAU,MAEtB,IA/EPiB,EAmFU,WACZ,OAAInD,IAASC,SAAS2B,EAAKxE,OACrB4C,IAASM,QAAQsB,EAAKxE,QACxBgF,GAAe,SAAAgB,GACbA,EAAMxB,KAAKtD,IAAM,GACjB8E,EAAMxB,KAAKrD,MAAO,EAClB6E,EAAMxB,KAAKM,SAAU,MAEhB,IAEPE,GAAe,SAAAgB,GACbA,EAAMxB,KAAKtD,IAAM,+DACjB8E,EAAMxB,KAAKrD,MAAO,EAClB6E,EAAMxB,KAAKM,SAAU,MAEhB,IAGTE,GAAe,SAAAgB,GACbA,EAAMxB,KAAKtD,IAAM,uCACjB8E,EAAMxB,KAAKrD,MAAO,EAClB6E,EAAMxB,KAAKM,SAAU,MAEhB,IA1GPiB,EA8GW,WACb,OAAInD,IAASC,SAAS4B,EAAMzE,OACtB4C,IAASQ,cAAcqB,EAAMzE,QAC/BgF,GAAe,SAAAgB,GACbA,EAAMvB,MAAMvD,IAAM,GAClB8E,EAAMvB,MAAMtD,MAAO,EACnB6E,EAAMvB,MAAMK,SAAU,MAEjB,IAEPE,GAAe,SAAAgB,GACbA,EAAMvB,MAAMvD,IAAM,+DAClB8E,EAAMvB,MAAMtD,MAAO,EACnB6E,EAAMvB,MAAMK,SAAU,MAEjB,IAGTE,GAAe,SAAAgB,GACbA,EAAMvB,MAAMvD,IAAM,uCAClB8E,EAAMvB,MAAMtD,MAAO,EACnB6E,EAAMvB,MAAMK,SAAU,MAEjB,IAMPmB,EAAeC,YAAcH,EAA2B,KACxDI,EAAcD,YAAcH,EAA0B,KACtDK,EAAqBF,YAAcH,EAAiC,KACpEM,EAAeH,YAAcH,EAA2B,KACxDO,EAAgBJ,YAAcH,EAA4B,KAC1DQ,EAAgBL,aAAc,WAC9BnB,EAAYF,SAASC,SAAWC,EAAYT,IAAIQ,SAAWC,EAAYR,WAAWO,SAAWC,EAAYP,KAAKM,SAAWC,EAAYN,MAAMK,QAC7IH,GAAmB,GAEnBA,GAAmB,KAEpB,KACG6B,EAAY,uCAAG,WAAO7C,GAAP,SAAA8C,EAAA,sDACnB9C,EAAE+C,iBACFrB,EAAQsB,IAAI,CACVC,SAAU7F,EAAKf,MACfmE,OAAQA,EACR0C,UAAWrC,EAAKxE,MAChByE,MAAOA,EAAMzE,MACb8G,SAAUxC,EAAItE,OACbiF,EAAS8B,MAAMC,kBARC,2CAAH,sDAUlB,OACE,0BAAM/G,UAAWQ,IAAMwG,KAAMC,SAAUV,EAAc3E,QAAS0E,EAAcI,KAE1E,kBAAC,IAAD,CAAO5G,KAAK,OAAO8B,QAASoE,EAAaU,IAAK1F,KAAMF,EAAMA,KAAK,qBAAMG,IAAK6D,EAAYF,SAAS3D,IAAKC,KAAM4D,EAAYF,SAAS1D,OAC/H,kBAAC,IAAD,CAAYJ,KAAK,eAAKuC,UAAW,CAAC,SAAK,UAAMrC,KAAMmD,IACnD,kBAAC,IAAD,CAAOrE,KAAK,WAAW8B,QAASsE,EAAYQ,IAAK1F,KAAMqD,EAAKvD,KAAK,eAAKG,IAAK6D,EAAYT,IAAIpD,IAAKC,KAAM4D,EAAYT,IAAInD,OACtH,kBAAC,IAAD,CAAOpB,KAAK,WAAW8B,QAASuE,EAAmBO,IAAK1F,KAAMsD,EAAYxD,KAAK,2BAAOG,IAAK6D,EAAYR,WAAWrD,IAAKC,KAAM4D,EAAYR,WAAWpD,OACpJ,kBAAC,IAAD,CAAOpB,KAAK,OAAO8B,QAASwE,EAAaM,IAAK1F,KAAMuD,EAAMzD,KAAK,eAAKG,IAAK6D,EAAYP,KAAKtD,IAAKC,KAAM4D,EAAYP,KAAKrD,OACtH,kBAAC,IAAD,CAAOpB,KAAK,OAAO8B,QAASyE,EAAcK,IAAK1F,KAAMwD,EAAO1D,KAAK,eAAKG,IAAK6D,EAAYN,MAAMvD,IAAKC,KAAM4D,EAAYN,MAAMtD,OAC1H,kBAAC,IAAD,CAAQnB,MAAM,eAAKM,UAAWoE,EAAiB3E,KAAK,SAASE,UAAWQ,IAAMC,IAAKL,QAASgF,EAAQhF","file":"static/js/19.a776b7b9.chunk.js","sourcesContent":["/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: 全局button组件\r\n */\r\n\r\nimport React, { ReactElement } from 'react';\r\nimport {Button} from 'antd'\r\n\r\nimport style from './Button.module.scss';\r\n\r\ninterface Props {\r\n  type?: 'button' | 'reset' | 'submit';\r\n  value: string;\r\n  className?: string;\r\n  onClick?: any;\r\n  color?: string;\r\n  fontSize?: number;\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  size?:'large'|'middle'|'small';\r\n}\r\n\r\nfunction MyButton({ type = 'button', value, className, color, fontSize, onClick,loading=false,disabled,size }: Props): ReactElement {\r\n  return (\r\n    // <button type={type} className={`${style.btn} ${className}`} style={{ 'backgroundColor': color, 'fontSize': `${fontSize}px` }} onClick={onClick}>{value}</button>\r\n    <Button type='primary' size={size} htmlType={type} loading={loading} className={`${style.btn} ${className}`} style={{ 'backgroundColor': color, 'fontSize': `${fontSize}px` }} onClick={onClick} disabled={disabled}>{value}</Button>\r\n  )\r\n}\r\n\r\nexport default MyButton\r\n","export {default} from './Button'","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__1T5OY\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: 全局input，仅包含text和password，配合useOnChange使用\r\n */\r\n\r\nimport React, {\r\n  ReactElement,\r\n  useState,\r\n} from 'react';\r\n\r\nimport {\r\n  EyeInvisibleOutlined,\r\n  EyeOutlined,\r\n} from '@ant-design/icons';\r\nimport { DatePicker } from 'antd'\r\n\r\nimport style from './Input.module.scss';\r\n\r\ninterface Props {\r\n  type: 'text' | 'password' | 'Date';\r\n  name: string; // input框前面的文字\r\n  placeholder?: string;\r\n  msg?: string;  // input下方的提示语\r\n  warn?: boolean; // input msg的警告\r\n  bind?: {\r\n    bindEvent: {\r\n      onChange: (e: React.SyntheticEvent) => any;\r\n      value: string;\r\n    }\r\n  }; // 双向绑定input事件\r\n  className?: string;\r\n  readOnly?: boolean;\r\n  value?: string;\r\n  update?: boolean;\r\n  hasBtn?: boolean;\r\n  btnValue?: string;\r\n  btnStatus?: boolean;\r\n  btnCallback?: (e: React.SyntheticEvent) => any;\r\n  dateCallback?: (...params: any) => any;\r\n  onFocus?: (e: React.SyntheticEvent) => any;\r\n  onBlur?: (e: React.SyntheticEvent) => any;\r\n  onInput?: (e: React.SyntheticEvent) => any;\r\n}\r\n\r\nfunction Input(props: Props): ReactElement {\r\n  const {\r\n    type,\r\n    name,\r\n    placeholder = '点击编辑内容',\r\n    bind,\r\n    msg,\r\n    warn = false,\r\n    readOnly = false,\r\n    update = false,\r\n    value,\r\n    hasBtn = false,\r\n    btnValue = '',\r\n    btnCallback,\r\n    btnStatus = false,\r\n    dateCallback,\r\n    onFocus,\r\n    onBlur,\r\n    onInput\r\n  } = props\r\n  const [isShowPwd, setIsShowPwd] = useState(false)\r\n  const [isReadOnly, setIsReadOnly] = useState(readOnly)\r\n  const toggleShowPwd = () => {\r\n    setIsShowPwd(!isShowPwd)\r\n  }\r\n  return (\r\n    <div className={`${style.container} ${props.className}`}>\r\n      <label className={style.label}>\r\n        <span className={style.name}>{name}</span>\r\n        {type === 'Date' ? <DatePicker className={style.input} placeholder='选择日期' onChange={dateCallback}/> :\r\n          <input\r\n            className={style.input}\r\n            type={!(type === 'password') ?\r\n              type\r\n              :\r\n              isShowPwd ?\r\n                'text' : 'password'\r\n            }\r\n            placeholder={placeholder}\r\n            readOnly={isReadOnly}\r\n            value={value || ''}\r\n            {...bind?.bindEvent}\r\n            onFocus={onFocus}\r\n            onBlur={onBlur}\r\n            onInput={onInput}\r\n          />}\r\n        {type === 'password' ?\r\n          isShowPwd ?\r\n            <EyeOutlined className={style.eye} onClick={toggleShowPwd} />\r\n            :\r\n            <EyeInvisibleOutlined className={style.eye} onClick={toggleShowPwd} />\r\n          :\r\n          null}\r\n        {hasBtn ? (<button\r\n          className={btnStatus ? style.disabled : style.btn}\r\n          disabled={btnStatus}\r\n          onClick={btnCallback}>{btnValue}</button>) : null}\r\n        {update ? (<span className={style.update} onClick={() => setIsReadOnly(false)}>修改</span>) : null}\r\n      </label>\r\n\r\n\r\n      <span className={warn ? style.warn : style.msg}>{msg}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Input_container__wKzPG\",\"label\":\"Input_label__lxk5D\",\"name\":\"Input_name__1SI8b\",\"input\":\"Input_input__1zsc-\",\"btn\":\"Input_btn__1N2g4\",\"disabled\":\"Input_disabled__10Lvh\",\"eye\":\"Input_eye__3OG8N\",\"msg\":\"Input_msg__2RtKO\",\"warn\":\"Input_warn__3bvyY\",\"update\":\"Input_update__Tkcme\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-08-20 18:49:22\r\n * @ Modified by: zao\r\n * @ Description: 做表单校验\r\n */\r\n\r\nimport { isNull, isEmpty } from 'lodash'\r\nconst EMAIL = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\nconst PHONE = /^1[3456789]\\d{9}$/;\r\n\r\nexport const required = (value: string) => {\r\n  if (isNull(value) || isEmpty(value)) {\r\n    return false\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nexport const checkLength = (value: string, length: number) => {\r\n  if (value.length <= length) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nexport const isEmail = (value: string) => {\r\n  return EMAIL.test(value)\r\n}\r\n\r\nexport const isPhoneNumber = (value: string) => {\r\n  return PHONE.test(value)\r\n}\r\n\r\nclass validate {\r\n  static required = required  \r\n  static checkLength = checkLength\r\n  static isEmail = isEmail\r\n  static isPhoneNumber=isPhoneNumber\r\n}\r\n\r\nexport default validate\r\n\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RadioGroup_container__1MeEE\",\"name\":\"RadioGroup_name__2DGaF\",\"radioList\":\"RadioGroup_radioList__m-4HZ\",\"radio\":\"RadioGroup_radio__3SN7e\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: RadioGroup主要用于性别input选项\r\n */\r\n\r\nimport React, { ReactElement, useState } from 'react';\r\nimport {useUpdateEffect} from '@umijs/hooks'\r\nimport style from './RadioGroup.module.scss';\r\n\r\ninterface Props {\r\n  name: string;\r\n  radioList: any[];\r\n  bind: any;\r\n  initialData?: any;\r\n}\r\n\r\nfunction RadioGroup({ name, radioList, bind, initialData = radioList[0] }: Props): ReactElement {\r\n  const [checkedTarget, setCheckedTarget] = useState(initialData)\r\n  const handleChange = (e: any) => {\r\n    bind(e.target.value)\r\n    setCheckedTarget(e.target.value)\r\n  }\r\n  useUpdateEffect(() => {\r\n    setCheckedTarget(initialData)\r\n  }, [initialData])\r\n  return (\r\n    <div className={style.container}>\r\n      <span className={style.name}>{name}</span>\r\n      <div className={style.radioList} onChange={handleChange}>\r\n        {radioList.map((item) => {\r\n          return (\r\n            <label className={style.radio} key={item}>\r\n              <input type=\"radio\" name={name} value={item} checked={checkedTarget === item} onChange={() => {\r\n              }} />\r\n              <span>{item}</span>\r\n            </label>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RadioGroup\r\n","export {default} from './RadioGroup'","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"style_form__DMl9n\",\"btn\":\"style_btn__1gKx1\"};","/*\r\n * @Author: zao\r\n * @Date: 2020-05-07 14:28:32\r\n * @LastEditors: zao\r\n * @LastEditTime: 2020-08-13 11:02:46\r\n * @Description:  注册组件\r\n */\r\n// TODO: 用策略模式重写表单校验,分离ui和逻辑组件\r\n\r\nimport React, { useState } from 'react';\r\n\r\nimport { message } from 'antd';\r\nimport {\r\n  useHistory,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport { useImmer } from 'use-immer';\r\n\r\nimport Button from '@/components/commons/Button';\r\nimport Input from '@/components/forms/Input/Input';\r\nimport RadioGroup from '@/components/forms/RadioGroup';\r\nimport { useChange } from '@/hooks';\r\nimport { signup } from '@/services/apis/user';\r\nimport validate from '@/utils/validate';\r\nimport {\r\n  useDebounceFn,\r\n  useRequest,\r\n} from '@umijs/hooks';\r\n\r\nimport style from './style.module.scss';\r\n\r\nconst Signup = () => {\r\n  // radio项\r\n  const [gender, setGender] = useState<'男' | '女'>('男')\r\n\r\n  // 绑定表单项\r\n  const name = useChange('')\r\n  const pwd = useChange('')\r\n  const confirmPwd = useChange('')\r\n  const mail = useChange('')\r\n  const phone = useChange('')\r\n\r\n  // 校验状态和校验信息\r\n  const [isValidateRight, setIsValidateRight] = useState(false)\r\n  const [validateMsg, setValidateMsg] = useImmer({\r\n    userName: { msg: '最长不超过7个字符', warn: false, isRight: false },\r\n    pwd: { msg: '密码不少于8位', warn: false, isRight: false },\r\n    confirmPwd: { msg: '密码不少于8位', warn: false, isRight: false },\r\n    mail: { msg: '', warn: false, isRight: false },\r\n    phone: { msg: '', warn: false, isRight: false },\r\n  })\r\n\r\n  // 当前的history location,用于给注册页面发送之前填写的验证码\r\n  const location: any = useLocation()\r\n  // history,用于注册成功后跳转\r\n  const history = useHistory()\r\n\r\n  // 注册请求\r\n  const signupR = useRequest(signup, {\r\n    manual: true,\r\n    onSuccess: (result, params) => {\r\n      if (result.code >= 0) {\r\n        message.success('注册成功,请前往登录')\r\n        history.push('/login/pwd')\r\n      }\r\n    }\r\n  })\r\n  // 验证表单\r\n  const validateForm = {\r\n    // 检查姓名\r\n    validateName: () => {\r\n      if (validate.required(name.value)) {\r\n        if (validate.checkLength(name.value, 7)) {\r\n          setValidateMsg(draft => {\r\n            draft.userName.msg = '最长不超过7个字符'\r\n            draft.userName.warn = false\r\n            draft.userName.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.userName.msg = '最长不超过7个字符'\r\n            draft.userName.warn = true\r\n            draft.userName.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.userName.msg = '用户名不能为空'\r\n          draft.userName.warn = true\r\n          draft.userName.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    // 检查密码\r\n    validatePwd: () => {\r\n      if (validate.required(pwd.value)) {\r\n        if (!validate.checkLength(pwd.value, 8)) {\r\n          setValidateMsg(draft => {\r\n            draft.pwd.msg = '密码不少于8位'\r\n            draft.pwd.warn = false\r\n            draft.pwd.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.pwd.msg = '密码不少于8位'\r\n            draft.pwd.warn = true\r\n            draft.pwd.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.pwd.msg = '密码不能为空'\r\n          draft.pwd.warn = true\r\n          draft.pwd.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    // 检查确认密码\r\n    validateConfirmPwd: () => {\r\n      if (validate.required(confirmPwd.value)) {\r\n        if (pwd.value === confirmPwd.value) {\r\n          setValidateMsg(draft => {\r\n            draft.confirmPwd.msg = '密码不少于8位'\r\n            draft.confirmPwd.warn = false\r\n            draft.confirmPwd.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.confirmPwd.msg = '确认密码不原密码不相同'\r\n            draft.confirmPwd.warn = true\r\n            draft.confirmPwd.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.confirmPwd.msg = '密码不能为空'\r\n          draft.confirmPwd.warn = true\r\n          draft.confirmPwd.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    // 检查邮箱\r\n    validateMail: () => {\r\n      if (validate.required(mail.value)) {\r\n        if (validate.isEmail(mail.value)) {\r\n          setValidateMsg(draft => {\r\n            draft.mail.msg = ''\r\n            draft.mail.warn = false\r\n            draft.mail.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.mail.msg = '请输入正确的邮箱格式'\r\n            draft.mail.warn = true\r\n            draft.mail.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.mail.msg = '邮箱不能为空'\r\n          draft.mail.warn = true\r\n          draft.mail.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    // 检查电话\r\n    validatePhone: () => {\r\n      if (validate.required(phone.value)) {\r\n        if (validate.isPhoneNumber(phone.value)) {\r\n          setValidateMsg(draft => {\r\n            draft.phone.msg = ''\r\n            draft.phone.warn = false\r\n            draft.phone.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.phone.msg = '请输入正确的电话格式'\r\n            draft.phone.warn = true\r\n            draft.phone.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.phone.msg = '电话不能为空'\r\n          draft.phone.warn = true\r\n          draft.phone.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  // 做表单校防抖\r\n  const validateName = useDebounceFn(validateForm.validateName, 300)\r\n  const validatePwd = useDebounceFn(validateForm.validatePwd, 300)\r\n  const validateConfirmPwd = useDebounceFn(validateForm.validateConfirmPwd, 300)\r\n  const validateMail = useDebounceFn(validateForm.validateMail, 300)\r\n  const validatePhone = useDebounceFn(validateForm.validatePhone, 300)\r\n  const checkValidate = useDebounceFn(() => {\r\n    if (validateMsg.userName.isRight && validateMsg.pwd.isRight && validateMsg.confirmPwd.isRight && validateMsg.mail.isRight && validateMsg.phone.isRight) {\r\n      setIsValidateRight(true)\r\n    } else {\r\n      setIsValidateRight(false)\r\n    }\r\n  }, 300)\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    signupR.run({\r\n      username: name.value,\r\n      gender: gender,\r\n      emailaddr: mail.value,\r\n      phone: phone.value,\r\n      password: pwd.value\r\n    }, location.state.verificationCode)\r\n  }\r\n  return (\r\n    <form className={style.form} onSubmit={handleSubmit} onInput={checkValidate.run}>\r\n      {/* <Avatar msg='上传头像' bind={setAvatar} /> */}\r\n      <Input type='text' onInput={validateName.run} bind={name} name='用户名' msg={validateMsg.userName.msg} warn={validateMsg.userName.warn} />\r\n      <RadioGroup name='性别' radioList={['男', '女']} bind={setGender} />\r\n      <Input type='password' onInput={validatePwd.run} bind={pwd} name='密码' msg={validateMsg.pwd.msg} warn={validateMsg.pwd.warn} />\r\n      <Input type='password' onInput={validateConfirmPwd.run} bind={confirmPwd} name='确认密码' msg={validateMsg.confirmPwd.msg} warn={validateMsg.confirmPwd.warn} />\r\n      <Input type='text' onInput={validateMail.run} bind={mail} name='邮箱' msg={validateMsg.mail.msg} warn={validateMsg.mail.warn} />\r\n      <Input type='text' onInput={validatePhone.run} bind={phone} name='电话' msg={validateMsg.phone.msg} warn={validateMsg.phone.warn} />\r\n      <Button value='保存' disabled={!isValidateRight} type='submit' className={style.btn} loading={signupR.loading} />\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Signup\r\n"],"sourceRoot":""}