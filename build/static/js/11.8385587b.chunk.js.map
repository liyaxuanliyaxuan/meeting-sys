{"version":3,"sources":["components/commons/Button/Button.tsx","components/commons/Button/index.ts","components/commons/Button/Button.module.scss","components/forms/Input/Input.tsx","components/forms/Input/Input.module.scss","components/forms/Input/index.ts","utils/validate.ts","components/forms/RadioGroup/RadioGroup.module.scss","components/forms/RadioGroup/RadioGroup.tsx","components/forms/RadioGroup/index.ts","constant/index.ts","components/forms/Avatar/Avatar.module.scss","pages/Center/Info/Info.module.scss","components/forms/Avatar/Avatar.tsx","pages/Center/Info/index.tsx"],"names":["MyButton","type","value","className","color","fontSize","onClick","loading","disabled","size","htmlType","style","btn","module","exports","Input","props","name","placeholder","bind","msg","warn","readOnly","update","hasBtn","btnValue","btnCallback","btnStatus","dateCallback","onFocus","onBlur","onInput","useState","isShowPwd","setIsShowPwd","isReadOnly","setIsReadOnly","toggleShowPwd","container","label","input","onChange","bindEvent","eye","EMAIL","PHONE","validate","required","isNull","isEmpty","checkLength","length","isEmail","test","isPhoneNumber","RadioGroup","radioList","initialData","checkedTarget","setCheckedTarget","useUpdateEffect","e","target","map","item","radio","key","checked","verificationWaitTime","Avatar","avatar","setAvatar","reader","FileReader","readAsDataURL","onload","result","src","alt","img","files","Info","useCountDown","count","start","verificationStatus","loadStatus","gender","setGender","showModal","setShowModal","verificationValue","setVerificationValue","useChange","mail","phone","changePwd","changeMailOrPhone","changeVerificationCode","isValidateRight","setIsValidateRight","auth","useAuth","history","useHistory","authC","authContainer","useContainer","useImmer","isRight","pwd","verification","validateMsg","setValidateMsg","userInfoR","useRequest","getUserInfo","onSuccess","param","data","info","setValue","username","emailaddr","updateUserR","userJson","updateUser","manual","updateUserAvatarR","formData","uploadUserIcon","updatePwdR","mailAddr_or_Phone","password","verificationCode","updatePwd","params","code","message","success","clearToken","setIsLogin","push","getVerificationCodeR","getVerificationCode","validateForm","validatePhoneOrMail","draft","validateVerification","validatePwd","validateKey","useDebounceFn","checkValidate","handleSubmit","a","preventDefault","avatarFormdata","FormData","set","run","get","spinning","onSubmit","title","visible","onOk","onCancel","confirmLoading","okButtonProps","fix","Button"],"mappings":"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","file":"static/js/11.8385587b.chunk.js","sourcesContent":["/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: 全局button组件\r\n */\r\n\r\nimport React, { ReactElement } from 'react';\r\nimport {Button} from 'antd'\r\n\r\nimport style from './Button.module.scss';\r\n\r\ninterface Props {\r\n  type?: 'button' | 'reset' | 'submit';\r\n  value: string;\r\n  className?: string;\r\n  onClick?: any;\r\n  color?: string;\r\n  fontSize?: number;\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  size?:'large'|'middle'|'small';\r\n}\r\n\r\nfunction MyButton({ type = 'button', value, className, color, fontSize, onClick,loading=false,disabled,size }: Props): ReactElement {\r\n  return (\r\n    // <button type={type} className={`${style.btn} ${className}`} style={{ 'backgroundColor': color, 'fontSize': `${fontSize}px` }} onClick={onClick}>{value}</button>\r\n    <Button type='primary' size={size} htmlType={type} loading={loading} className={`${style.btn} ${className}`} style={{ 'backgroundColor': color, 'fontSize': `${fontSize}px` }} onClick={onClick} disabled={disabled}>{value}</Button>\r\n  )\r\n}\r\n\r\nexport default MyButton\r\n","export {default} from './Button'","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__1T5OY\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: 全局input，仅包含text和password，配合useOnChange使用\r\n */\r\n\r\nimport React, {\r\n  ReactElement,\r\n  useState,\r\n} from 'react';\r\n\r\nimport {\r\n  EyeInvisibleOutlined,\r\n  EyeOutlined,\r\n} from '@ant-design/icons';\r\nimport { DatePicker } from 'antd'\r\n\r\nimport style from './Input.module.scss';\r\n\r\ninterface Props {\r\n  type: 'text' | 'password' | 'Date';\r\n  name: string; // input框前面的文字\r\n  placeholder?: string;\r\n  msg?: string;  // input下方的提示语\r\n  warn?: boolean; // input msg的警告\r\n  bind?: {\r\n    bindEvent: {\r\n      onChange: (e: React.SyntheticEvent) => any;\r\n      value: string;\r\n    }\r\n  }; // 双向绑定input事件\r\n  className?: string;\r\n  readOnly?: boolean;\r\n  value?: string;\r\n  update?: boolean;\r\n  hasBtn?: boolean;\r\n  btnValue?: string;\r\n  btnStatus?: boolean;\r\n  btnCallback?: (e: React.SyntheticEvent) => any;\r\n  dateCallback?: (...params: any) => any;\r\n  onFocus?: (e: React.SyntheticEvent) => any;\r\n  onBlur?: (e: React.SyntheticEvent) => any;\r\n  onInput?: (e: React.SyntheticEvent) => any;\r\n}\r\n\r\nfunction Input(props: Props): ReactElement {\r\n  const {\r\n    type,\r\n    name,\r\n    placeholder = '点击编辑内容',\r\n    bind,\r\n    msg,\r\n    warn = false,\r\n    readOnly = false,\r\n    update = false,\r\n    value,\r\n    hasBtn = false,\r\n    btnValue = '',\r\n    btnCallback,\r\n    btnStatus = false,\r\n    dateCallback,\r\n    onFocus,\r\n    onBlur,\r\n    onInput\r\n  } = props\r\n  const [isShowPwd, setIsShowPwd] = useState(false)\r\n  const [isReadOnly, setIsReadOnly] = useState(readOnly)\r\n  const toggleShowPwd = () => {\r\n    setIsShowPwd(!isShowPwd)\r\n  }\r\n  return (\r\n    <div className={`${style.container} ${props.className}`}>\r\n      <label className={style.label}>\r\n        <span className={style.name}>{name}</span>\r\n        {type === 'Date' ? <DatePicker className={style.input} placeholder='选择日期' onChange={dateCallback}/> :\r\n          <input\r\n            className={style.input}\r\n            type={!(type === 'password') ?\r\n              type\r\n              :\r\n              isShowPwd ?\r\n                'text' : 'password'\r\n            }\r\n            placeholder={placeholder}\r\n            readOnly={isReadOnly}\r\n            value={value || ''}\r\n            {...bind?.bindEvent}\r\n            onFocus={onFocus}\r\n            onBlur={onBlur}\r\n            onInput={onInput}\r\n          />}\r\n        {type === 'password' ?\r\n          isShowPwd ?\r\n            <EyeOutlined className={style.eye} onClick={toggleShowPwd} />\r\n            :\r\n            <EyeInvisibleOutlined className={style.eye} onClick={toggleShowPwd} />\r\n          :\r\n          null}\r\n        {hasBtn ? (<button\r\n          className={btnStatus ? style.disabled : style.btn}\r\n          disabled={btnStatus}\r\n          onClick={btnCallback}>{btnValue}</button>) : null}\r\n        {update ? (<span className={style.update} onClick={() => setIsReadOnly(false)}>修改</span>) : null}\r\n      </label>\r\n\r\n\r\n      <span className={warn ? style.warn : style.msg}>{msg}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Input_container__wKzPG\",\"label\":\"Input_label__lxk5D\",\"name\":\"Input_name__1SI8b\",\"input\":\"Input_input__1zsc-\",\"btn\":\"Input_btn__1N2g4\",\"disabled\":\"Input_disabled__10Lvh\",\"eye\":\"Input_eye__3OG8N\",\"msg\":\"Input_msg__2RtKO\",\"warn\":\"Input_warn__3bvyY\",\"update\":\"Input_update__Tkcme\"};","export {default} from './Input'","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-08-20 18:49:22\r\n * @ Modified by: zao\r\n * @ Description: 做表单校验\r\n */\r\n\r\nimport { isNull, isEmpty } from 'lodash'\r\nconst EMAIL = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\nconst PHONE = /^1[3456789]\\d{9}$/;\r\n\r\nexport const required = (value: string) => {\r\n  if (isNull(value) || isEmpty(value)) {\r\n    return false\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nexport const checkLength = (value: string, length: number) => {\r\n  if (value.length <= length) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nexport const isEmail = (value: string) => {\r\n  return EMAIL.test(value)\r\n}\r\n\r\nexport const isPhoneNumber = (value: string) => {\r\n  return PHONE.test(value)\r\n}\r\n\r\nclass validate {\r\n  static required = required  \r\n  static checkLength = checkLength\r\n  static isEmail = isEmail\r\n  static isPhoneNumber=isPhoneNumber\r\n}\r\n\r\nexport default validate\r\n\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RadioGroup_container__1MeEE\",\"name\":\"RadioGroup_name__2DGaF\",\"radioList\":\"RadioGroup_radioList__m-4HZ\",\"radio\":\"RadioGroup_radio__3SN7e\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: RadioGroup主要用于性别input选项\r\n */\r\n\r\nimport React, { ReactElement, useState } from 'react';\r\nimport {useUpdateEffect} from '@umijs/hooks'\r\nimport style from './RadioGroup.module.scss';\r\n\r\ninterface Props {\r\n  name: string;\r\n  radioList: any[];\r\n  bind: any;\r\n  initialData?: any;\r\n}\r\n\r\nfunction RadioGroup({ name, radioList, bind, initialData = radioList[0] }: Props): ReactElement {\r\n  const [checkedTarget, setCheckedTarget] = useState(initialData)\r\n  const handleChange = (e: any) => {\r\n    bind(e.target.value)\r\n    setCheckedTarget(e.target.value)\r\n  }\r\n  useUpdateEffect(() => {\r\n    setCheckedTarget(initialData)\r\n  }, [initialData])\r\n  return (\r\n    <div className={style.container}>\r\n      <span className={style.name}>{name}</span>\r\n      <div className={style.radioList} onChange={handleChange}>\r\n        {radioList.map((item) => {\r\n          return (\r\n            <label className={style.radio} key={item}>\r\n              <input type=\"radio\" name={name} value={item} checked={checkedTarget === item} onChange={() => {\r\n              }} />\r\n              <span>{item}</span>\r\n            </label>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RadioGroup\r\n","export {default} from './RadioGroup'","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-08-20 18:49:22\r\n * @ Modified by: zao\r\n * @ Description: 全局常量\r\n */\r\n\r\nconst normal = {}\r\n\r\n// 验证码需要等待的时间\r\nexport const verificationWaitTime = 5\r\n\r\nexport default normal","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Avatar_container__PhlR-\",\"label\":\"Avatar_label__1rNsw\",\"img\":\"Avatar_img__3lJ8b\",\"input\":\"Avatar_input__3354F\",\"msg\":\"Avatar_msg__2LaiI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Info_container__2IiLb\",\"pwd\":\"Info_pwd__31w1M\",\"fix\":\"Info_fix__1YxBm\",\"btn\":\"Info_btn__3P36M\"};","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-03-20\r\n * @ Modified by: zao\r\n * @ Description: 头像组件，主要用于在表单输入时起到头像实时预览和上传数据的作用\r\n */\r\n\r\nimport React, {\r\n  ReactElement,\r\n  useState,\r\n} from 'react';\r\n\r\nimport {useUpdateEffect} from '@umijs/hooks'\r\nimport style from './Avatar.module.scss';\r\n\r\ninterface Props {\r\n  msg: string;\r\n  bind: any;\r\n  className?: string;\r\n  initialData?: any;\r\n}\r\n\r\nfunction Avatar({ msg, bind, className, initialData = '' }: Props): ReactElement {\r\n  const [avatar, setAvatar] = useState(initialData)\r\n  const uploadImg = (e: any) => {\r\n    const files = e.target.files;\r\n    if (files && files[0]) {\r\n      let reader: FileReader = new FileReader();\r\n      reader.readAsDataURL(files[0]);\r\n      reader.onload = e => {\r\n        setAvatar(e.target?.result);\r\n        bind(files[0])\r\n      };\r\n    }\r\n  }\r\n  useUpdateEffect(() => {\r\n    if (typeof initialData === 'string') {\r\n      setAvatar(initialData)\r\n    } else {\r\n      let reader: FileReader = new FileReader();\r\n      reader.readAsDataURL(initialData);\r\n      reader.onload = e => {\r\n        setAvatar(e.target?.result);\r\n      };\r\n    }\r\n\r\n  }, [initialData])\r\n  return (\r\n    <div className={`${style.container} ${className}`}>\r\n      <label className={style.label}>\r\n        <img src={avatar} alt=\"\" className={style.img} />\r\n        <input onChange={uploadImg} type=\"file\" className={style.input} />\r\n        <span className={style.msg}>{msg}</span>\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Avatar\r\n","/**\r\n * @ Author: zao\r\n * @ Create Time: 2020-08-20 18:49:22\r\n * @ Modified by: zao\r\n * @ Description: 个人信息页面\r\n */\r\n\r\nimport React, {\r\n  ReactElement,\r\n  useState,\r\n} from 'react';\r\n\r\nimport {\r\n  message,\r\n  Modal,\r\n  Spin,\r\n} from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Button from '@/components/commons/Button';\r\nimport Avatar from '@/components/forms/Avatar';\r\nimport Input from '@/components/forms/Input';\r\nimport RadioGroup from '@/components/forms/RadioGroup';\r\nimport {\r\n  useAuth,\r\n  useChange,\r\n  useCountDown,\r\n} from '@/hooks';\r\nimport {\r\n  getUserInfo,\r\n  getVerificationCode,\r\n  updatePwd,\r\n  updateUser,\r\n  uploadUserIcon,\r\n} from '@/services/apis/user';\r\nimport authContainer from '@/store/auth';\r\nimport { useRequest, useDebounceFn,useUpdateEffect } from '@umijs/hooks';\r\nimport { verificationWaitTime } from '@/constant'\r\nimport style from './Info.module.scss';\r\nimport { useImmer } from 'use-immer'\r\nimport validate from '@/utils/validate'\r\n\r\ninterface Props {\r\n\r\n}\r\n\r\nfunction Info(props: Props): ReactElement {\r\n  const [count, start, verificationStatus] = useCountDown(verificationWaitTime)\r\n  const [loadStatus, setLoadStatus] = useState(false)\r\n  const [avatar, setAvatar] = useState<any>('')\r\n  const [gender, setGender] = useState<'男' | '女'>('男')\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [verificationValue, setVerificationValue] = useState('获取验证码')\r\n  const name = useChange('')\r\n  const mail = useChange('')\r\n  const phone = useChange('')\r\n  const changePwd = useChange('')\r\n  const changeMailOrPhone = useChange('')\r\n  const changeVerificationCode = useChange('')\r\n  const [isValidateRight, setIsValidateRight] = useState(false)\r\n  // const [changeMsg, setChangeMsg] = useState('')\r\n  const auth = useAuth()\r\n  const history = useHistory()\r\n  const authC = authContainer.useContainer()\r\n\r\n  const [validateMsg, setValidateMsg] = useImmer({\r\n    key: { msg: '手机号尽量与微信号保持一致', warn: false, isRight: false },\r\n    pwd: { msg: '密码不少于8位', warn: false, isRight: false },\r\n    verification: { msg: '', warn: false, isRight: false },\r\n  })\r\n\r\n  const userInfoR = useRequest(getUserInfo, {\r\n    onSuccess: (result, param) => {\r\n      if (result.data) {\r\n        setAvatar(`http://www.ljhhhx.com:8080/meeting/userIcon/${result.data.info.avatar}`)\r\n        setGender(result.data.info.gender)\r\n        name.setValue(result.data.info.username)\r\n        mail.setValue(result.data.info.emailaddr)\r\n        phone.setValue(result.data.info.phone)\r\n      }\r\n    }\r\n  })\r\n  const updateUserR = useRequest((userJson) => updateUser(userJson), { manual: true })\r\n  const updateUserAvatarR = useRequest((formData) => uploadUserIcon(formData), { manual: true })\r\n  const updatePwdR = useRequest((mailAddr_or_Phone, password, verificationCode) => updatePwd(mailAddr_or_Phone, password, verificationCode), {\r\n    manual: true,\r\n    onSuccess: (result, params) => {\r\n      if (result.code >= 0) {\r\n        message.success('修改成功,请重新登录')\r\n        auth.clearToken()\r\n        setShowModal(false)\r\n        authC.setIsLogin(false)\r\n        history.push('/login')\r\n      }\r\n    }\r\n  })\r\n  const getVerificationCodeR = useRequest((mailAddr_or_Phone) => getVerificationCode(mailAddr_or_Phone), { manual: true })\r\n\r\n  const handleModalOk = () => {\r\n    updatePwdR.run(changeMailOrPhone.value, changePwd.value, changeVerificationCode.value)\r\n  }\r\n  const handleModalCancel = () => {\r\n    setShowModal(false)\r\n  }\r\n\r\n  const handleGetVerificationCode = (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    start()\r\n    if (validateForm.validatePhoneOrMail()) {\r\n      start()\r\n      getVerificationCodeR.run(changeMailOrPhone.value)\r\n    }\r\n  }\r\n\r\n  const validateForm = {\r\n    validatePhoneOrMail: () => {\r\n      if (validate.required(changeMailOrPhone.value)) {\r\n        // 验证正确格式\r\n        if (validate.isPhoneNumber(changeMailOrPhone.value) || validate.isEmail(changeMailOrPhone.value)) {\r\n          setValidateMsg(draft => {\r\n            draft.key.msg = '手机号尽量与微信号保持一致'\r\n            draft.key.warn = false\r\n            draft.key.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.key.msg = '请输入正确的电话号码或邮箱'\r\n            draft.key.warn = true\r\n            draft.key.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.key.msg = '邮箱或者电话不能为空'\r\n          draft.key.warn = true\r\n          draft.key.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    validateVerification: () => {\r\n      // 验证验证码是否为空\r\n      if (validate.required(changeVerificationCode.value)) {\r\n        setValidateMsg(draft => {\r\n          draft.verification.msg = ''\r\n          draft.verification.warn = false\r\n          draft.verification.isRight = true\r\n        })\r\n        return true\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.verification.msg = '验证码不能为空'\r\n          draft.verification.warn = true\r\n          draft.verification.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    // 检查密码\r\n    validatePwd: () => {\r\n      if (validate.required(changePwd.value)) {\r\n        if (!validate.checkLength(changePwd.value, 8)) {\r\n          setValidateMsg(draft => {\r\n            draft.pwd.msg = '密码不少于8位'\r\n            draft.pwd.warn = false\r\n            draft.pwd.isRight = true\r\n          })\r\n          return true\r\n        } else {\r\n          setValidateMsg(draft => {\r\n            draft.pwd.msg = '密码不少于8位'\r\n            draft.pwd.warn = true\r\n            draft.pwd.isRight = false\r\n          })\r\n          return false\r\n        }\r\n      } else {\r\n        setValidateMsg(draft => {\r\n          draft.pwd.msg = '密码不能为空'\r\n          draft.pwd.warn = true\r\n          draft.pwd.isRight = false\r\n        })\r\n        return false\r\n      }\r\n    },\r\n  }\r\n  const validateKey = useDebounceFn(validateForm.validatePhoneOrMail, 300)\r\n  const validatePwd = useDebounceFn(validateForm.validatePwd, 300)\r\n  const validateVerification = useDebounceFn(validateForm.validateVerification, 300)\r\n  const checkValidate = useDebounceFn(() => {\r\n    if (validateMsg.key.isRight && validateMsg.pwd.isRight && validateMsg.verification.isRight) {\r\n      setIsValidateRight(true)\r\n    } else {\r\n      setIsValidateRight(false)\r\n    }\r\n  }, 300)\r\n\r\n  const handleSubmit = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    let avatarFormdata = new FormData()\r\n    avatarFormdata.set('img', avatar)\r\n    avatarFormdata.set('phone', phone.value)\r\n    updateUserR.run({ gender, username: name.value, emailaddr: mail.value, phone: phone.value })\r\n    if (typeof avatarFormdata.get('img') !== 'string') updateUserAvatarR.run(avatarFormdata)\r\n    userInfoR.run()\r\n  }\r\n  useUpdateEffect(() => {\r\n    if (verificationStatus === true) {\r\n      setVerificationValue(`重新发送验证码(${count})`)\r\n    } else {\r\n      setVerificationValue('获取验证码')\r\n    }\r\n  }, [count])\r\n\r\n  return (\r\n    <Spin spinning={loadStatus}>\r\n      <form className={style.container} onSubmit={handleSubmit}>\r\n        <Avatar msg='修改头像' bind={setAvatar} initialData={avatar} />\r\n        <Input type='text' bind={name} name='用户名' msg='最长超过7个字符' readOnly update={true} />\r\n        <RadioGroup name='性别' radioList={['男', '女']} bind={setGender} initialData={gender} />\r\n        <Input type='text' bind={mail} name='邮箱' msg='修改需要源邮箱认证' readOnly update={true} />\r\n        <Input type='text' bind={phone} name='电话' msg='修改需要源手机认证' readOnly update={true} />\r\n        <div className={style.pwd}>\r\n          <h2 onClick={() => setShowModal(true)}>修改密码</h2>\r\n          <span>修改密码需要手机或者邮箱验证</span>\r\n        </div>\r\n        <Modal\r\n          title=\"修改密码\"\r\n          visible={showModal}\r\n          onOk={handleModalOk}\r\n          onCancel={handleModalCancel}\r\n          confirmLoading={updatePwdR.loading}\r\n          okButtonProps={{ disabled: !isValidateRight}}\r\n        >\r\n          <form className={style.fix} onInput={checkValidate.run}>\r\n            <Input type='text' onInput={validateKey.run} bind={changeMailOrPhone} name='手机/邮箱' msg={validateMsg.key.msg} warn={validateMsg.key.warn} />\r\n            <Input type='password' onInput={validatePwd.run} bind={changePwd} name='新密码' msg={validateMsg.pwd.msg} warn={validateMsg.pwd.warn} />\r\n            <Input type='text' onInput={validateVerification.run} bind={changeVerificationCode} name='验证码' hasBtn btnValue={verificationValue} btnStatus={verificationStatus} btnCallback={handleGetVerificationCode} msg={validateMsg.verification.msg} warn={validateMsg.verification.warn} />\r\n          </form>\r\n\r\n        </Modal>\r\n        <Button type='submit' className={style.btn} value='保存' loading={updateUserR.loading}/>\r\n      </form>\r\n    </Spin>\r\n\r\n  )\r\n}\r\n\r\nexport default Info\r\n"],"sourceRoot":""}